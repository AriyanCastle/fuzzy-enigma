"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generateClinicalHistory";
exports.ids = ["pages/api/generateClinicalHistory"];
exports.modules = {

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("openai");

/***/ }),

/***/ "(api)/./pages/api/generateClinicalHistory.ts":
/*!**********************************************!*\
  !*** ./pages/api/generateClinicalHistory.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(openai__WEBPACK_IMPORTED_MODULE_0__);\n\nconst generateClinicalHistory = async (summary)=>{\n    const initialPrompt = \"你是一個中醫師助理，請將以下內容轉變成病史。 切記內容要準確，不可以擅自增添內容，用字要用標準的病史寫法，要用繁體字：\\n————————————\\n列表：\\n- 入院前兩日唔小心受涼\\n- 有咽喉痛、鼻塞\\n- 陣發性非刺激性咳嗽，較劇烈\\n- 黃綠色痰，量少，難咳出\\n- 輕度畏寒\\n- 全身酸痛唔舒服\\n- 冇寒顫、高燥、頭暈、心跳加速\\n- 冇腹痛腹瀉\\n- 未經任何處理\\n- 之前無好轉，來求診並入院\\n病史：\\n主訴:咽痛鼻塞咳嗽2天\\n現病史：入院前2天不慎受涼後,出現咽痛、鼻塞,繼而出現咳嗽,呈陣發性非刺激性,較劇烈,痰呈黃綠色,量少,難咯,並感輕度畏寒,全身酸痛不適,無寒戰高熱,無頭暈頭痛,無胸悶心悸,無腹痛腹瀉等,未予注意,未經任何處理,經休息上述病情無好轉,今求診我院;\\n——————————————\\n列表：\\n- 上腹部脹痛兩日\\n- 飲食不節後出現病症\\n- 持續痛楚，飯後更甚\\n- 不想進食\\n- 有時感到噁心想嘔\\n- 沒有畏寒發燒\\n- 沒有頭暈頭痛\\n- 沒有胸悶心悸\\n- 沒有腹瀉黑便等\\n- 曾到當地診所就診\\n- 服藥後未見改善，遂來本院\\n病史：\\n主訴:上腹脹痛2天\\n現病史：入院前2天飲食不節後,出現上腹脹痛,呈持續性,餐後尤甚,致不思飲食,時有噁心欲吐,無畏冷發熱,無頭暈頭痛,無胸悶心悸,無腹瀉黑便等,就診於當地診所,予“藥物口服” 具體用藥欠祥,上述病情無好轉,今求診我院;\\n————————————————\\n列表：\\n- 上腹脹痛兩日\\n- 食物不潔感覺\\n- 臍周痛，持續性\\n- 腹瀉黃水樣，粘液，每日超過10次\\n- 洩瀉後腹痛稍緩解\\n- 肛門灼熱感\\n- 時有噁心嘔吐\\n- 無畏冷發熱\\n- 無眩暈頭痛\\n- 無胸悶心悸\\n- 無黑便\\n- 曾就醫並服藥，但具體情況未知\\n- 病情有改善，就診本院\\n病史：\\n主訴:上腹脹痛2天\\n現病史：入院前2天飲食不潔後,出現腹痛,以臍周為主,呈持續性隱痛,陣發性加劇,同時出現腹瀉,呈黃色浠水樣,夾有粘液,日10餘次,洩後腹痛稍緩解,伴肛門灼熱感,時有噁心欲吐,無畏冷發熱,無頭暈頭痛,無胸悶心悸,無黑便等,就診於當地診所,予“藥物口服” 具體用藥欠祥,上述病情稍好轉,今求診我院;\";\n    // Initialize OpenAI API with the API key\n    const configuration = new openai__WEBPACK_IMPORTED_MODULE_0__.Configuration({\n        apiKey: \"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\"\n    });\n    const openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAIApi(configuration);\n    // API call to OpenAI\n    const response = await openai.createChatCompletion({\n        model: \"gpt-4\",\n        messages: [\n            {\n                role: \"system\",\n                content: initialPrompt\n            },\n            {\n                role: \"user\",\n                content: summary\n            }\n        ],\n        temperature: 0\n    });\n    // Extract the clinical history\n    const history = response.data.choices?.[0]?.message?.content?.trim() ?? \"\";\n    return history;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (req, res)=>{\n    const { summary  } = req.body;\n    try {\n        const history = await generateClinicalHistory(summary);\n        res.status(200).json({\n            history\n        });\n    } catch (error) {\n        console.error(\"Error in generateClinicalHistory API:\", error);\n        res.status(500).json({\n            error: error.message\n        });\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZ2VuZXJhdGVDbGluaWNhbEhpc3RvcnkudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ2tEO0FBRWxELE1BQU1FLDBCQUEwQixPQUFPQyxVQUFxQztJQUMxRSxNQUFNQyxnQkFBaUI7SUFDdkIseUNBQXlDO0lBQ3pDLE1BQU1DLGdCQUFnQixJQUFJTCxpREFBYUEsQ0FBQztRQUN0Q00sUUFBUUMscURBQTBCO0lBQ3BDO0lBQ0EsTUFBTUcsU0FBUyxJQUFJVCw2Q0FBU0EsQ0FBQ0k7SUFFN0IscUJBQXFCO0lBQ3JCLE1BQU1NLFdBQVcsTUFBTUQsT0FBT0Usb0JBQW9CLENBQUM7UUFDakRDLE9BQU87UUFDUEMsVUFBVTtZQUNSO2dCQUFFQyxNQUFNO2dCQUFVQyxTQUFTWjtZQUFjO1lBQ3pDO2dCQUFFVyxNQUFNO2dCQUFRQyxTQUFTYjtZQUFRO1NBQ2xDO1FBQ0RjLGFBQWE7SUFDZjtJQUVBLCtCQUErQjtJQUMvQixNQUFNQyxVQUFVUCxTQUFTUSxJQUFJLENBQUNDLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRUMsU0FBU0wsU0FBU00sVUFBVTtJQUN4RSxPQUFPSjtBQUNUO0FBRUEsaUVBQWUsT0FBT0ssS0FBcUJDLE1BQXlCO0lBQ2xFLE1BQU0sRUFBRXJCLFFBQU8sRUFBRSxHQUFHb0IsSUFBSUUsSUFBSTtJQUU1QixJQUFJO1FBQ0YsTUFBTVAsVUFBVSxNQUFNaEIsd0JBQXdCQztRQUM5Q3FCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRVQ7UUFBUTtJQUNqQyxFQUFFLE9BQU9VLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLHlDQUF5Q0E7UUFDdkRKLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTyxNQUFpQlAsT0FBTztRQUFDO0lBQUs7QUFDaEUsR0FBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FwcC8uL3BhZ2VzL2FwaS9nZW5lcmF0ZUNsaW5pY2FsSGlzdG9yeS50cz9kNzZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiwgT3BlbkFJQXBpIH0gZnJvbSAnb3BlbmFpJztcblxuY29uc3QgZ2VuZXJhdGVDbGluaWNhbEhpc3RvcnkgPSBhc3luYyAoc3VtbWFyeTogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcbiAgY29uc3QgaW5pdGlhbFByb21wdCA9ICBcIuS9oOaYr+S4gOWAi+S4remGq+W4q+WKqeeQhu+8jOiri+Wwh+S7peS4i+WFp+Wuuei9ieiuiuaIkOeXheWPsuOAgiDliIfoqJjlhaflrrnopoHmupbnorrvvIzkuI3lj6/ku6Xmk4Xoh6rlop7mt7vlhaflrrnvvIznlKjlrZfopoHnlKjmqJnmupbnmoTnl4Xlj7Llr6vms5XvvIzopoHnlKjnuYHpq5TlrZfvvJpcXG7igJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJRcXG7liJfooajvvJpcXG4tIOWFpemZouWJjeWFqeaXpeWUlOWwj+W/g+WPl+a2vFxcbi0g5pyJ5ZK95ZaJ55eb44CB6by75aGeXFxuLSDpmaPnmbzmgKfpnZ7liLrmv4DmgKflkrPll73vvIzovIPliofng4hcXG4tIOm7g+e2oOiJsueXsO+8jOmHj+Wwke+8jOmbo+WSs+WHulxcbi0g6LyV5bqm55WP5a+SXFxuLSDlhajouqvphbjnl5vllJToiJLmnI1cXG4tIOWGh+Wvkumhq+OAgemrmOeHpeOAgemgreaaiOOAgeW/g+i3s+WKoOmAn1xcbi0g5YaH6IW555eb6IW554CJXFxuLSDmnKrntpPku7vkvZXomZXnkIZcXG4tIOS5i+WJjeeEoeWlvei9ie+8jOS+huaxguiouuS4puWFpemZolxcbueXheWPsu+8mlxcbuS4u+iotDrlkr3nl5vpvLvloZ7lkrPll70y5aSpXFxu54++55eF5Y+y77ya5YWl6Zmi5YmNMuWkqeS4jeaFjuWPl+a2vOW+jCzlh7rnj77lkr3nl5vjgIHpvLvloZ4s57m86ICM5Ye654++5ZKz5Ze9LOWRiOmZo+eZvOaAp+mdnuWIuua/gOaApyzovIPliofng4gs55ew5ZGI6buD57ag6ImyLOmHj+WwkSzpm6Plkq8s5Lim5oSf6LyV5bqm55WP5a+SLOWFqOi6q+mFuOeXm+S4jemBqSznhKHlr5LmiLDpq5jnhrEs54Sh6aCt5pqI6aCt55ebLOeEoeiDuOaCtuW/g+aCuCznhKHohbnnl5vohbnngInnrYks5pyq5LqI5rOo5oSPLOacque2k+S7u+S9leiZleeQhizntpPkvJHmga/kuIrov7Dnl4Xmg4XnhKHlpb3ovYks5LuK5rGC6Ki65oiR6ZmiO1xcbuKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlFxcbuWIl+ihqO+8mlxcbi0g5LiK6IW56YOo6IS555eb5YWp5pelXFxuLSDpo7Lpo5/kuI3nr4Dlvozlh7rnj77nl4Xnl4dcXG4tIOaMgee6jOeXm+almu+8jOmjr+W+jOabtOeUmlxcbi0g5LiN5oOz6YCy6aOfXFxuLSDmnInmmYLmhJ/liLDlmYHlv4Pmg7PlmJRcXG4tIOaykuacieeVj+WvkueZvOeHklxcbi0g5rKS5pyJ6aCt5pqI6aCt55ebXFxuLSDmspLmnInog7jmgrblv4PmgrhcXG4tIOaykuacieiFueeAiem7keS+v+etiVxcbi0g5pu+5Yiw55W25Zyw6Ki65omA5bCx6Ki6XFxuLSDmnI3ol6XlvozmnKropovmlLnlloTvvIzpgYLkvobmnKzpmaJcXG7nl4Xlj7LvvJpcXG7kuLvoqLQ65LiK6IW56IS555ebMuWkqVxcbuePvueXheWPsu+8muWFpemZouWJjTLlpKnpo7Lpo5/kuI3nr4Dlvows5Ye654++5LiK6IW56IS555ebLOWRiOaMgee6jOaApyzppJDlvozlsKTnlJos6Ie05LiN5oCd6aOy6aOfLOaZguacieWZgeW/g+assuWQkCznhKHnlY/lhrfnmbznhrEs54Sh6aCt5pqI6aCt55ebLOeEoeiDuOaCtuW/g+aCuCznhKHohbnngInpu5Hkvr/nrYks5bCx6Ki65pa855W25Zyw6Ki65omALOS6iOKAnOiXpeeJqeWPo+acjeKAnSDlhbfpq5TnlKjol6XmrKDnpaUs5LiK6L+w55eF5oOF54Sh5aW96L2JLOS7iuaxguiouuaIkemZojtcXG7igJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJTigJRcXG7liJfooajvvJpcXG4tIOS4iuiFueiEueeXm+WFqeaXpVxcbi0g6aOf54mp5LiN5r2U5oSf6Ka6XFxuLSDoh43lkajnl5vvvIzmjIHnuozmgKdcXG4tIOiFueeAiem7g+awtOaoo++8jOeymOa2su+8jOavj+aXpei2hemBjjEw5qyhXFxuLSDmtKnngInlvozohbnnl5vnqI3nt6nop6NcXG4tIOiCm+mWgOeBvOeGseaEn1xcbi0g5pmC5pyJ5ZmB5b+D5ZiU5ZCQXFxuLSDnhKHnlY/lhrfnmbznhrFcXG4tIOeEoeecqeaaiOmgreeXm1xcbi0g54Sh6IO45oK25b+D5oK4XFxuLSDnhKHpu5Hkvr9cXG4tIOabvuWwsemGq+S4puacjeiXpe+8jOS9huWFt+mrlOaDheazgeacquefpVxcbi0g55eF5oOF5pyJ5pS55ZaE77yM5bCx6Ki65pys6ZmiXFxu55eF5Y+y77yaXFxu5Li76Ki0OuS4iuiFueiEueeXmzLlpKlcXG7nj77nl4Xlj7LvvJrlhaXpmaLliY0y5aSp6aOy6aOf5LiN5r2U5b6MLOWHuuePvuiFueeXmyzku6Xoh43lkajngrrkuLss5ZGI5oyB57qM5oCn6Zqx55ebLOmZo+eZvOaAp+WKoOWKhyzlkIzmmYLlh7rnj77ohbnngIks5ZGI6buD6Imy5rWg5rC05qijLOWkvuacieeymOa2sizml6UxMOmkmOasoSzmtKnlvozohbnnl5vnqI3nt6nop6Ms5Ly06IKb6ZaA54G854ax5oSfLOaZguacieWZgeW/g+assuWQkCznhKHnlY/lhrfnmbznhrEs54Sh6aCt5pqI6aCt55ebLOeEoeiDuOaCtuW/g+aCuCznhKHpu5Hkvr/nrYks5bCx6Ki65pa855W25Zyw6Ki65omALOS6iOKAnOiXpeeJqeWPo+acjeKAnSDlhbfpq5TnlKjol6XmrKDnpaUs5LiK6L+w55eF5oOF56iN5aW96L2JLOS7iuaxguiouuaIkemZojtcIjtcbiAgLy8gSW5pdGlhbGl6ZSBPcGVuQUkgQVBJIHdpdGggdGhlIEFQSSBrZXlcbiAgY29uc3QgY29uZmlndXJhdGlvbiA9IG5ldyBDb25maWd1cmF0aW9uKHtcbiAgICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxuICB9KTtcbiAgY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSUFwaShjb25maWd1cmF0aW9uKTtcblxuICAvLyBBUEkgY2FsbCB0byBPcGVuQUlcbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuY3JlYXRlQ2hhdENvbXBsZXRpb24oe1xuICAgIG1vZGVsOiAnZ3B0LTQnLFxuICAgIG1lc3NhZ2VzOiBbXG4gICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBpbml0aWFsUHJvbXB0IH0sXG4gICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogc3VtbWFyeSB9LFxuICAgIF0sXG4gICAgdGVtcGVyYXR1cmU6IDAsXG4gIH0pO1xuXG4gIC8vIEV4dHJhY3QgdGhlIGNsaW5pY2FsIGhpc3RvcnlcbiAgY29uc3QgaGlzdG9yeSA9IHJlc3BvbnNlLmRhdGEuY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50Py50cmltKCkgPz8gXCJcIjtcbiAgcmV0dXJuIGhpc3Rvcnk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcbiAgY29uc3QgeyBzdW1tYXJ5IH0gPSByZXEuYm9keTtcblxuICB0cnkge1xuICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBnZW5lcmF0ZUNsaW5pY2FsSGlzdG9yeShzdW1tYXJ5KTtcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IGhpc3RvcnkgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZ2VuZXJhdGVDbGluaWNhbEhpc3RvcnkgQVBJOicsIGVycm9yKTtcbiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAoZXJyb3IgYXMgRXJyb3IpLm1lc3NhZ2UgfSk7ICB9XG59OyJdLCJuYW1lcyI6WyJDb25maWd1cmF0aW9uIiwiT3BlbkFJQXBpIiwiZ2VuZXJhdGVDbGluaWNhbEhpc3RvcnkiLCJzdW1tYXJ5IiwiaW5pdGlhbFByb21wdCIsImNvbmZpZ3VyYXRpb24iLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJvcGVuYWkiLCJyZXNwb25zZSIsImNyZWF0ZUNoYXRDb21wbGV0aW9uIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJoaXN0b3J5IiwiZGF0YSIsImNob2ljZXMiLCJtZXNzYWdlIiwidHJpbSIsInJlcSIsInJlcyIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/generateClinicalHistory.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/generateClinicalHistory.ts"));
module.exports = __webpack_exports__;

})();