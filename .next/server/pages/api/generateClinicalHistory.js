"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generateClinicalHistory";
exports.ids = ["pages/api/generateClinicalHistory"];
exports.modules = {

/***/ "openai":
/*!*************************!*\
  !*** external "openai" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("openai");

/***/ }),

/***/ "(api)/./pages/api/generateClinicalHistory.ts":
/*!**********************************************!*\
  !*** ./pages/api/generateClinicalHistory.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"openai\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(openai__WEBPACK_IMPORTED_MODULE_0__);\n\nconst generateClinicalHistory = async (summary)=>{\n    const initialPrompt = \"你是一個中醫師助理，請將以下內容轉變成病史。 切記內容要準確，不可以擅自增添內容，用字要用標準的病史寫法，要用繁體字：\\n————————————\\n列表：\\n- 入院前兩日唔小心受涼\\n- 有咽喉痛、鼻塞\\n- 陣發性非刺激性咳嗽，較劇烈\\n- 黃綠色痰，量少，難咳出\\n- 輕度畏寒\\n- 全身酸痛唔舒服\\n- 冇寒顫、高燥、頭暈、心跳加速\\n- 冇腹痛腹瀉\\n- 未經任何處理\\n- 之前無好轉，來求診並入院\\n病史：\\n主訴:咽痛鼻塞咳嗽2天\\n現病史：入院前2天不慎受涼後,出現咽痛、鼻塞,繼而出現咳嗽,呈陣發性非刺激性,較劇烈,痰呈黃綠色,量少,難咯,並感輕度畏寒,全身酸痛不適,無寒戰高熱,無頭暈頭痛,無胸悶心悸,無腹痛腹瀉等,未予注意,未經任何處理,經休息上述病情無好轉,今求診我院;\\n——————————————\\n列表：\\n- 上腹部脹痛兩日\\n- 飲食不節後出現病症\\n- 持續痛楚，飯後更甚\\n- 不想進食\\n- 有時感到噁心想嘔\\n- 沒有畏寒發燒\\n- 沒有頭暈頭痛\\n- 沒有胸悶心悸\\n- 沒有腹瀉黑便等\\n- 曾到當地診所就診\\n- 服藥後未見改善，遂來本院\\n病史：\\n主訴:上腹脹痛2天\\n現病史：入院前2天飲食不節後,出現上腹脹痛,呈持續性,餐後尤甚,致不思飲食,時有噁心欲吐,無畏冷發熱,無頭暈頭痛,無胸悶心悸,無腹瀉黑便等,就診於當地診所,予“藥物口服” 具體用藥欠祥,上述病情無好轉,今求診我院;\\n————————————————\\n列表：\\n- 上腹脹痛兩日\\n- 食物不潔感覺\\n- 臍周痛，持續性\\n- 腹瀉黃水樣，粘液，每日超過10次\\n- 洩瀉後腹痛稍緩解\\n- 肛門灼熱感\\n- 時有噁心嘔吐\\n- 無畏冷發熱\\n- 無眩暈頭痛\\n- 無胸悶心悸\\n- 無黑便\\n- 曾就醫並服藥，但具體情況未知\\n- 病情有改善，就診本院\\n病史：\\n主訴:上腹脹痛2天\\n現病史：入院前2天飲食不潔後,出現腹痛,以臍周為主,呈持續性隱痛,陣發性加劇,同時出現腹瀉,呈黃色浠水樣,夾有粘液,日10餘次,洩後腹痛稍緩解,伴肛門灼熱感,時有噁心欲吐,無畏冷發熱,無頭暈頭痛,無胸悶心悸,無黑便等,就診於當地診所,予“藥物口服” 具體用藥欠祥,上述病情稍好轉,今求診我院;\";\n    // Initialize OpenAI API with the API key\n    const configuration = new openai__WEBPACK_IMPORTED_MODULE_0__.Configuration({\n        apiKey: \"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\"\n    });\n    const openai = new openai__WEBPACK_IMPORTED_MODULE_0__.OpenAIApi(configuration);\n    // API call to OpenAI\n    const response = await openai.createChatCompletion({\n        model: \"gpt-4\",\n        messages: [\n            {\n                role: \"system\",\n                content: initialPrompt\n            },\n            {\n                role: \"user\",\n                content: summary\n            }\n        ],\n        temperature: 0\n    });\n    // Extract the clinical history\n    const history = response.data.choices?.[0]?.message?.content?.trim() ?? \"\";\n    return history;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (req, res)=>{\n    const { summary  } = req.body;\n    try {\n        const history = await generateClinicalHistory(summary);\n        res.status(200).json({\n            history\n        });\n    } catch (error) {\n        console.error(\"Error in generateClinicalHistory API:\", error);\n        res.status(500).json({\n            error: error.message\n        });\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvZ2VuZXJhdGVDbGluaWNhbEhpc3RvcnkudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ2tEO0FBRWxELE1BQU1FLDBCQUEwQixPQUFPQztJQUNyQyxNQUFNQyxnQkFBaUI7SUFDdkIseUNBQXlDO0lBQ3pDLE1BQU1DLGdCQUFnQixJQUFJTCxpREFBYUEsQ0FBQztRQUN0Q00sUUFBUUMscURBQTBCRTtJQUNwQztJQUNBLE1BQU1DLFNBQVMsSUFBSVQsNkNBQVNBLENBQUNJO0lBRTdCLHFCQUFxQjtJQUNyQixNQUFNTSxXQUFXLE1BQU1ELE9BQU9FLHFCQUFxQjtRQUNqREMsT0FBTztRQUNQQyxVQUFVO1lBQ1I7Z0JBQUVDLE1BQU07Z0JBQVVDLFNBQVNaO1lBQWM7WUFDekM7Z0JBQUVXLE1BQU07Z0JBQVFDLFNBQVNiO1lBQVE7U0FDbEM7UUFDRGMsYUFBYTtJQUNmO0lBRUEsK0JBQStCO0lBQy9CLE1BQU1DLFVBQVVQLFNBQVNRLEtBQUtDLFNBQVMsQ0FBQyxFQUFFLEVBQUVDLFNBQVNMLFNBQVNNLFVBQVU7SUFDeEUsT0FBT0o7QUFDVDtBQUVBLGlFQUFlLE9BQU9LLEtBQXFCQztJQUN6QyxNQUFNLEVBQUVyQixRQUFPLEVBQUUsR0FBR29CLElBQUlFO0lBRXhCLElBQUk7UUFDRixNQUFNUCxVQUFVLE1BQU1oQix3QkFBd0JDO1FBQzlDcUIsSUFBSUUsT0FBTyxLQUFLQyxLQUFLO1lBQUVUO1FBQVE7SUFDakMsRUFBRSxPQUFPVSxPQUFPO1FBQ2RDLFFBQVFELE1BQU0seUNBQXlDQTtRQUN2REosSUFBSUUsT0FBTyxLQUFLQyxLQUFLO1lBQUVDLE9BQU8sTUFBaUJQO1FBQVE7SUFBSztBQUNoRSxHQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXBwLy4vcGFnZXMvYXBpL2dlbmVyYXRlQ2xpbmljYWxIaXN0b3J5LnRzP2Q3NmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgeyBDb25maWd1cmF0aW9uLCBPcGVuQUlBcGkgfSBmcm9tICdvcGVuYWknO1xuXG5jb25zdCBnZW5lcmF0ZUNsaW5pY2FsSGlzdG9yeSA9IGFzeW5jIChzdW1tYXJ5OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICBjb25zdCBpbml0aWFsUHJvbXB0ID0gIFwi5L2g5piv5LiA5YCL5Lit6Yar5bir5Yqp55CG77yM6KuL5bCH5Lul5LiL5YWn5a656L2J6K6K5oiQ55eF5Y+y44CCIOWIh+iomOWFp+Wuueimgea6lueiuu+8jOS4jeWPr+S7peaTheiHquWinua3u+WFp+Wuue+8jOeUqOWtl+imgeeUqOaomea6lueahOeXheWPsuWvq+azle+8jOimgeeUqOe5gemrlOWtl++8mlxcbuKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlFxcbuWIl+ihqO+8mlxcbi0g5YWl6Zmi5YmN5YWp5pel5ZSU5bCP5b+D5Y+X5ra8XFxuLSDmnInlkr3llonnl5vjgIHpvLvloZ5cXG4tIOmZo+eZvOaAp+mdnuWIuua/gOaAp+WSs+WXve+8jOi8g+WKh+eDiFxcbi0g6buD57ag6Imy55ew77yM6YeP5bCR77yM6Zuj5ZKz5Ye6XFxuLSDovJXluqbnlY/lr5JcXG4tIOWFqOi6q+mFuOeXm+WUlOiIkuacjVxcbi0g5YaH5a+S6aGr44CB6auY54el44CB6aCt5pqI44CB5b+D6Lez5Yqg6YCfXFxuLSDlhofohbnnl5vohbnngIlcXG4tIOacque2k+S7u+S9leiZleeQhlxcbi0g5LmL5YmN54Sh5aW96L2J77yM5L6G5rGC6Ki65Lim5YWl6ZmiXFxu55eF5Y+y77yaXFxu5Li76Ki0OuWSveeXm+m8u+WhnuWSs+WXvTLlpKlcXG7nj77nl4Xlj7LvvJrlhaXpmaLliY0y5aSp5LiN5oWO5Y+X5ra85b6MLOWHuuePvuWSveeXm+OAgem8u+WhniznubzogIzlh7rnj77lkrPll70s5ZGI6Zmj55m85oCn6Z2e5Yi65r+A5oCnLOi8g+WKh+eDiCznl7DlkYjpu4PntqDoibIs6YeP5bCRLOmbo+WSryzkuKbmhJ/ovJXluqbnlY/lr5Is5YWo6Lqr6YW455eb5LiN6YGpLOeEoeWvkuaIsOmrmOeGsSznhKHpoK3mmojpoK3nl5ss54Sh6IO45oK25b+D5oK4LOeEoeiFueeXm+iFueeAieetiSzmnKrkuojms6jmhI8s5pyq57aT5Lu75L2V6JmV55CGLOe2k+S8keaBr+S4iui/sOeXheaDheeEoeWlvei9iSzku4rmsYLoqLrmiJHpmaI7XFxu4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCU4oCUXFxu5YiX6KGo77yaXFxuLSDkuIrohbnpg6johLnnl5vlhanml6VcXG4tIOmjsumjn+S4jeevgOW+jOWHuuePvueXheeXh1xcbi0g5oyB57qM55eb5qWa77yM6aOv5b6M5pu055SaXFxuLSDkuI3mg7PpgLLpo59cXG4tIOacieaZguaEn+WIsOWZgeW/g+aDs+WYlFxcbi0g5rKS5pyJ55WP5a+S55m854eSXFxuLSDmspLmnInpoK3mmojpoK3nl5tcXG4tIOaykuacieiDuOaCtuW/g+aCuFxcbi0g5rKS5pyJ6IW554CJ6buR5L6/562JXFxuLSDmm77liLDnlbblnLDoqLrmiYDlsLHoqLpcXG4tIOacjeiXpeW+jOacquimi+aUueWWhO+8jOmBguS+huacrOmZolxcbueXheWPsu+8mlxcbuS4u+iotDrkuIrohbnohLnnl5sy5aSpXFxu54++55eF5Y+y77ya5YWl6Zmi5YmNMuWkqemjsumjn+S4jeevgOW+jCzlh7rnj77kuIrohbnohLnnl5ss5ZGI5oyB57qM5oCnLOmkkOW+jOWwpOeUmizoh7TkuI3mgJ3po7Lpo58s5pmC5pyJ5ZmB5b+D5qyy5ZCQLOeEoeeVj+WGt+eZvOeGsSznhKHpoK3mmojpoK3nl5ss54Sh6IO45oK25b+D5oK4LOeEoeiFueeAiem7keS+v+etiSzlsLHoqLrmlrznlbblnLDoqLrmiYAs5LqI4oCc6Jel54mp5Y+j5pyN4oCdIOWFt+mrlOeUqOiXpeasoOelpSzkuIrov7Dnl4Xmg4XnhKHlpb3ovYks5LuK5rGC6Ki65oiR6ZmiO1xcbuKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlOKAlFxcbuWIl+ihqO+8mlxcbi0g5LiK6IW56IS555eb5YWp5pelXFxuLSDpo5/niankuI3mvZTmhJ/oprpcXG4tIOiHjeWRqOeXm++8jOaMgee6jOaAp1xcbi0g6IW554CJ6buD5rC05qij77yM57KY5ray77yM5q+P5pel6LaF6YGOMTDmrKFcXG4tIOa0qeeAieW+jOiFueeXm+eojee3qeino1xcbi0g6IKb6ZaA54G854ax5oSfXFxuLSDmmYLmnInlmYHlv4PlmJTlkJBcXG4tIOeEoeeVj+WGt+eZvOeGsVxcbi0g54Sh55yp5pqI6aCt55ebXFxuLSDnhKHog7jmgrblv4PmgrhcXG4tIOeEoem7keS+v1xcbi0g5pu+5bCx6Yar5Lim5pyN6Jel77yM5L2G5YW36auU5oOF5rOB5pyq55+lXFxuLSDnl4Xmg4XmnInmlLnlloTvvIzlsLHoqLrmnKzpmaJcXG7nl4Xlj7LvvJpcXG7kuLvoqLQ65LiK6IW56IS555ebMuWkqVxcbuePvueXheWPsu+8muWFpemZouWJjTLlpKnpo7Lpo5/kuI3mvZTlvows5Ye654++6IW555ebLOS7peiHjeWRqOeCuuS4uyzlkYjmjIHnuozmgKfpmrHnl5ss6Zmj55m85oCn5Yqg5YqHLOWQjOaZguWHuuePvuiFueeAiSzlkYjpu4PoibLmtaDmsLTmqKMs5aS+5pyJ57KY5rayLOaXpTEw6aSY5qyhLOa0qeW+jOiFueeXm+eojee3qeinoyzkvLTogpvploDngbznhrHmhJ8s5pmC5pyJ5ZmB5b+D5qyy5ZCQLOeEoeeVj+WGt+eZvOeGsSznhKHpoK3mmojpoK3nl5ss54Sh6IO45oK25b+D5oK4LOeEoem7keS+v+etiSzlsLHoqLrmlrznlbblnLDoqLrmiYAs5LqI4oCc6Jel54mp5Y+j5pyN4oCdIOWFt+mrlOeUqOiXpeasoOelpSzkuIrov7Dnl4Xmg4XnqI3lpb3ovYks5LuK5rGC6Ki65oiR6ZmiO1wiO1xuICAvLyBJbml0aWFsaXplIE9wZW5BSSBBUEkgd2l0aCB0aGUgQVBJIGtleVxuICBjb25zdCBjb25maWd1cmF0aW9uID0gbmV3IENvbmZpZ3VyYXRpb24oe1xuICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVksXG4gIH0pO1xuICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJQXBpKGNvbmZpZ3VyYXRpb24pO1xuXG4gIC8vIEFQSSBjYWxsIHRvIE9wZW5BSVxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jcmVhdGVDaGF0Q29tcGxldGlvbih7XG4gICAgbW9kZWw6ICdncHQtNCcsXG4gICAgbWVzc2FnZXM6IFtcbiAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IGluaXRpYWxQcm9tcHQgfSxcbiAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBzdW1tYXJ5IH0sXG4gICAgXSxcbiAgICB0ZW1wZXJhdHVyZTogMCxcbiAgfSk7XG5cbiAgLy8gRXh0cmFjdCB0aGUgY2xpbmljYWwgaGlzdG9yeVxuICBjb25zdCBoaXN0b3J5ID0gcmVzcG9uc2UuZGF0YS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQ/LnRyaW0oKSA/PyBcIlwiO1xuICByZXR1cm4gaGlzdG9yeTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIChyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkgPT4ge1xuICBjb25zdCB7IHN1bW1hcnkgfSA9IHJlcS5ib2R5O1xuXG4gIHRyeSB7XG4gICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IGdlbmVyYXRlQ2xpbmljYWxIaXN0b3J5KHN1bW1hcnkpO1xuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgaGlzdG9yeSB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZW5lcmF0ZUNsaW5pY2FsSGlzdG9yeSBBUEk6JywgZXJyb3IpO1xuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IChlcnJvciBhcyBFcnJvcikubWVzc2FnZSB9KTsgIH1cbn07Il0sIm5hbWVzIjpbIkNvbmZpZ3VyYXRpb24iLCJPcGVuQUlBcGkiLCJnZW5lcmF0ZUNsaW5pY2FsSGlzdG9yeSIsInN1bW1hcnkiLCJpbml0aWFsUHJvbXB0IiwiY29uZmlndXJhdGlvbiIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJPUEVOQUlfQVBJX0tFWSIsIm9wZW5haSIsInJlc3BvbnNlIiwiY3JlYXRlQ2hhdENvbXBsZXRpb24iLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsImhpc3RvcnkiLCJkYXRhIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJ0cmltIiwicmVxIiwicmVzIiwiYm9keSIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/generateClinicalHistory.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/generateClinicalHistory.ts"));
module.exports = __webpack_exports__;

})();